<!-- views/partials/header.ejs -->

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-item nav-link active" href="">Accueil <span class="sr-only">(current)</span></a>
        <a class="nav-item nav-link" href="/job">Jobs</a>
        <a class="nav-item nav-link" href="/cluster">Cluster</a>
        <a class="nav-item nav-link" href="/project">Projects</a>
        <%_ if (electron == 'on') { %>
            <a class="nav-item nav-link" href=javascript:void(0); onclick="loadJson('<%=json%>')">New project</a>
            <!-- script src="../../electron/renderer-process/jsonloader.js"</script-->
            <script>
            function loadJson (jsonfile)
            {
                console.log('__dirname', __dirname);
                const remote = require('electron').remote;
                var jsonfile = '../data/'+jsonfile;
                ihm_data = require(jsonfile)['ihm'];
                remote.getCurrentWindow().loadURL('file://' + __dirname + '/../views/pages/creation.ejs', {electron:'on', json:ihm_data})
            }
            </script>
        <% } else { %>
            <% console.log('electron not on', electron)  %>
        <% } %>
      </div>
    </div>
  </nav>
